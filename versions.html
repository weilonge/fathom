

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Version History &mdash; Fathom 2.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Fathom 2.0 documentation" href="index.html"/>
        <link rel="next" title="Glossary" href="glossary.html"/>
        <link rel="prev" title="Development" href="development.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Fathom
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="using.html">Using Fathom</a></li>
<li class="toctree-l1"><a class="reference internal" href="ruleset.html">Rule and Ruleset Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Version History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#backward-incompatible-changes">Backward-incompatible changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id2">1.1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">1.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">1.0</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Fathom</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 







<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Version History</li>
    <li class="wy-breadcrumbs-aside">
      
          
          <a href="_sources/versions.rst.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="version-history">
<h1>Version History<a class="headerlink" href="#version-history" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>2.0<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>The focii for 2.0 are syntactic sugar and support for larger, more powerful rulesets that can operate at higher levels of abstraction. From these priorities spring all of the following:</p>
<ul class="simple">
<li>&#8220;Yankers&#8221; or aggregate functions are now part of the ruleset: <a class="reference internal" href="ruleset.html#max" title="max"><code class="xref js js-func docutils literal"><span class="pre">max()</span></code></a> and <a class="reference internal" href="ruleset.html#and" title="and"><code class="xref js js-func docutils literal"><span class="pre">and()</span></code></a> for now, with more in a later release. This in-ruleset mapping from the fuzzy domain of scores back to the boolean domain of types complements the opposite mapping provided by <a class="reference internal" href="ruleset.html#score" title="score"><code class="xref js js-func docutils literal"><span class="pre">score()</span></code></a> and lets ruleset authors choose between efficiency and completeness. It also saves imperative programming where maxima are referenced from more than one place. Finally, it opens the door to automatic optimization down the road.</li>
<li>Answers are computed lazily, running only the necessary rules each time you call <a class="reference internal" href="ruleset.html#BoundRuleset.get" title="BoundRuleset.get"><code class="xref js js-func docutils literal"><span class="pre">get()</span></code></a> and caching intermediate results to save work on later calls. We thus eschew 1.x&#8217;s strategy of emitting the entire scored world for the surrounding imperative program to examine and instead expose a factbase that acts like a lazy hash of answers. This allows for large, sophisticated rulesets that are nonetheless fast and can be combined to reuse parts (see <a class="reference internal" href="ruleset.html#Ruleset.rules" title="Ruleset.rules"><code class="xref js js-func docutils literal"><span class="pre">Ruleset.rules()</span></code></a>). Of course, if you still want to imbibe the entire scored corpus of nodes in your surrounding program, you can simply yank all nodes of a type using the <a class="reference internal" href="ruleset.html#type" title="type"><code class="xref js js-func docutils literal"><span class="pre">type()</span></code></a> yanker: just point it to <a class="reference internal" href="ruleset.html#out" title="out"><code class="xref js js-func docutils literal"><span class="pre">out()</span></code></a>, and the results will be available from the outside: <code class="docutils literal"><span class="pre">rule(type('foo'),</span> <span class="pre">out('someKey'))</span></code>.</li>
<li>We expand the domain of concern of a ruleset from a single dimension (&#8220;Find just the ads!&#8221;) to multiple ones (&#8220;Find the ads and the navigation and the products and the prices!&#8221;). This is done by making scores and notes per-type.</li>
<li><dl class="first docutils">
<dt>The rule syntax has been richly sugared to…</dt>
<dd><ul class="first last">
<li>be shorter and easier to read in most cases</li>
<li>surface more info declaratively so the query planner can take advantage of it (<a class="reference internal" href="ruleset.html#props" title="props"><code class="xref js js-func docutils literal"><span class="pre">props()</span></code></a> is where the old-style ranker functions went, but avoid them when you don&#8217;t need that much power, and you&#8217;ll reap a reward of concision and efficiently planned queries)</li>
<li>allow you to concisely factor up repeated parts of complex LHSs and RHSs</li>
</ul>
</dd>
</dl>
</li>
<li>The new experimental <a class="reference internal" href="ruleset.html#and" title="and"><code class="xref js js-func docutils literal"><span class="pre">and()</span></code></a> combinator allows you to build more powerful abstractions upon the black boxes of types.</li>
<li>Test coverage is greatly improved, and eslint is keeping us from doing overtly stupid things.</li>
</ul>
<div class="section" id="backward-incompatible-changes">
<h3>Backward-incompatible changes<a class="headerlink" href="#backward-incompatible-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>RHSs (née ranker functions) can no longer return multiple facts, which simplifies both syntax and design. For now, use multiple rules, each emitting one fact, and share expensive intermediate computations in notes. If this proves a problem in practice, we&#8217;ll switch back, but I never saw anyone return multiple facts in the wild.</li>
<li>Scores are now per-type. This lets you deliver multiple independent scores per ruleset. It also lets Fathom optimize out downstream rules in many cases, since downstream rules&#8217; scores no longer back-propagate to upstream types. Per-type scores also enable complex computations with types as composable units of abstraction, open the possibility of over-such-and-such-a-score yankers, and make non-multiplication-based score components a possibility. However, the old behavior remains largely available via <a class="reference internal" href="ruleset.html#conserveScore" title="conserveScore"><code class="xref js js-func docutils literal"><span class="pre">conserveScore()</span></code></a>.</li>
<li>Flavors are now types.</li>
</ul>
</div>
</div>
<div class="section" id="id2">
<h2>1.1.2<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Stop assuming querySelectorAll() results conform to the iterator protocol. This fixes compatibility with Chrome.</li>
<li>Add test coverage reporting.</li>
</ul>
</div>
<div class="section" id="id3">
<h2>1.1.1<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>No changes. Just bump the version in an attempt to get the npm index page to update.</li>
</ul>
</div>
<div class="section" id="id4">
<h2>1.1<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Stop using <code class="docutils literal"><span class="pre">const</span></code> in <code class="docutils literal"><span class="pre">for...of</span></code> loops. This lets Fathom run within Firefox, which does not allow this due to a bug in its ES implementation.</li>
<li>Optimize DistanceMatrix.numClusters(), which should make clustering a bit faster.</li>
</ul>
</div>
<div class="section" id="id5">
<h2>1.0<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Initial release</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="glossary.html" class="btn btn-neutral float-right" title="Glossary" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="development.html" class="btn btn-neutral" title="Development" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Mozilla Foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>